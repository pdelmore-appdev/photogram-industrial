
<div class="row">


  <!-- user info -->
  <div class="col-md-6 offset-3 mt-3">
    <div class="row g-3 lh-lg my-3">
      <div class="col-md-3">
        <img src="<%= @user.avatar %>" class="img-fluid img-avatar" alt="...">
      </div>
      <div class="col-md-9">
        <div class="card-body">
          <div class="d-flex justify-content-between">
            <div>
              <h1 class="card-title"><%= @user.username %>
              </h1>
            </div>
            <div>
              <span class="badge bg-secondary">
                <% if @user.private == true %>
                  Private
                <% else %>
                  Public
                <% end %>
              </span>
            </div>
          </div>

          <div>
            <ul class="nav justify-content-center my-2 nav-fill">
              <li class="nav-item">
                <a class="nav-link" data-bs-toggle="modal" data-bs-target="#followersModal" href="#">
                  <strong>
                    <%= @user.accepted_received_follow_requests.count  %>
                  </strong>
                  Followers
                </a>
              </li>
              <li class="nav-item">
                <a class="nav-link"  data-bs-toggle="modal" data-bs-target="#followingModal" href="#">
                  <strong>
                    <%= @user.accepted_sent_follow_requests.count %>
                  </strong>
                  Following
                </a>
              </li>
              <li class="nav-item">
                <a class="nav-link" data-bs-toggle="modal" data-bs-target="#pendingModal" href="#">
                  <strong>
                    <%= @user.pending_received_follow_requests.count %>
                  </strong>
                  Pending
                </a>
              </li>
            </ul>
          </div>
          <div class="btn btn-outline-secondary d-grid my-3">Follow button</div>

          <div class="my-5">
            <p class="card-text"><%= @user.bio %></p>
            <p><a href="">Link</a></p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="col-md-6 offset-md-3 mb-4">

    <ul class="nav nav-tabs nav-fill">
      <li class="nav-item">
        <%= link_to user_path(@user.username), class: "nav-link" do %>
          Posts
          <span class="badge text-bg-secondary rounded-pill"><%= @user.own_photos.count %></span>
        <% end %>
      </li>
      <li class="nav-item">
        <%= link_to liked_photos_path(@user.username), class: "nav-link active" do %>
          Liked
          <span class="badge text-bg-secondary rounded-pill"><%= @user.liked_photos.count %></span>
        <% end %>
      </li>
    </ul>

  </div>

<% @user.liked_photos.each do |photo| %>
<%= render "photos/photo", photo: photo %>

<% end %>

</div>

<!-- Followers Modal -->
<div class="modal fade" id="followersModal" tabindex="-1" aria-labelledby="followersModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-5" id="followersModalLabel"><%= @user.username %>'s followers</h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">

        <ul class="list-group">
          <% @user.accepted_received_follow_requests.each do |f| %>
            <li class="list-group-item">
              <%= link_to f.sender.username, user_path(f.sender.username) %>
            </li>
          <% end %>
        </ul>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

<!-- Following Modal -->
<div class="modal fade" id="followingModal" tabindex="-1" aria-labelledby="followingModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-5" id="followingModalLabel"><%= @user.username %>'s following</h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">

        <ul class="list-group">
          <% @user.accepted_sent_follow_requests.each do |f| %>
            <li class="list-group-item">
            <%= link_to f.recipient.username, user_path(f.recipient.username) %>
            </li>
          <% end %>
        </ul>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

<!-- Pending Modal -->
<div class="modal fade" id="pendingModal" tabindex="-1" aria-labelledby="pendingModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-5" id="pendingModalLabel"><%= @user.username %>'s pending</h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">

        <ul class="list-group">
          <% @user.pending_received_follow_requests.each do |f| %>
            <li class="list-group-item">
            <%= link_to f.sender.username, user_path(f.sender.username) %>
            </li>
          <% end %>
        </ul>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>
